import{c as o,u as D,r as l,d as m,o as q,j as e,e as x,s as $,f as w,p as U,h as F,i as z,k as R,l as V}from"./index-zrcHwBG9.js";import{U as W,B}from"./user-Cvzq3anp.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],G=o("LogIn",H);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],J=o("LogOut",Y);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Q=o("Send",K);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Z=o("SquarePen",X);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],te=o("Trash2",ee),se="/portfolio_web/assets/bg-BrCG3-iJ.jpg",le=()=>{const{currentUser:n,isAdmin:k}=D(),[S,C]=l.useState([]),[P,E]=l.useState(!0),[s,r]=l.useState({Name:"",Email:"",Occupation:"",Post:"",Institution:"",Comment:""}),[f,y]=l.useState(!1),[j,h]=l.useState(""),[N,i]=l.useState(""),[c,p]=l.useState(null),I=["Select an occupation","Accountant","Actor/Actress","Architect","Artist","Attorney/Lawyer","Baker","Chef","Consultant","Dentist","Designer","Doctor/Physician","Driver","Engineer","Entrepreneur","Farmer","Firefighter","Flight Attendant","Healthcare Worker","Journalist","Librarian","Manager","Mechanic","Musician","Nurse","Photographer","Pilot","Police Officer","Professor","Programmer/Developer","Real Estate Agent","Researcher","Salesperson","Scientist","Student","Teacher","Technician","Veterinarian","Writer","Other"],v=t=>{if(!t)return null;const d=t.toLowerCase().trim().split("").reduce((u,g)=>{const b=g.charCodeAt(0);return(u<<5)-u+b},0);return`https://www.gravatar.com/avatar/${Math.abs(d)}?s=200&d=mp&r=pg`};l.useEffect(()=>{const t=m(x,"testimonials");q(t,a=>{const d=a.val();if(d){const u=Object.entries(d).map(([g,b])=>({id:g,...b})).reverse();C(u)}E(!1)})},[]);const O=async()=>{try{await $(w,U).catch(t=>{t.code==="auth/popup-closed-by-user"||t.code==="auth/cancelled-popup-request"?window.location.href=`https://personal-portfolio-37a0a.firebaseapp.com/__/auth/handler?apiKey=${firebaseConfig.apiKey}&authType=signInWithPopup&provider=google.com`:i(t.message)})}catch(t){i(t.message)}},T=async()=>{try{await F(w),p(null)}catch(t){i(t.message)}},A=async t=>{if(t.preventDefault(),!s.Name||!s.Email||!s.Occupation||s.Occupation==="Select an occupation"||!s.Post||!s.Institution||!s.Comment){i("All fields are required.");return}y(!0),i("");try{const a={name:s.Name,email:s.Email,Occupation:s.Occupation,post:s.Post,institution:s.Institution,Comment:s.Comment,dateAndTime:new Date().toLocaleString(),profilePictureUrl:v(s.Email),userId:n.uid};c?(await z(m(x,`testimonials/${c}`),a),h("Testimonial updated successfully!")):(await R(m(x,"testimonials"),a),h("Thank you for your testimonial!")),r({Name:"",Email:"",Occupation:"",Post:"",Institution:"",Comment:""}),p(null)}catch(a){console.error(a),i("Something went wrong!")}finally{y(!1)}},L=t=>{r({Name:t.name,Email:t.email,Occupation:t.Occupation,Post:t.post,Institution:t.institution,Comment:t.Comment}),p(t.id)},M=async t=>{if(window.confirm("Are you sure you want to delete this testimonial?"))try{await V(m(x,`testimonials/${t}`)),h("Testimonial deleted successfully!")}catch{i("Failed to delete testimonial.")}};if(P)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900/40",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})});const _=S.slice(0,6);return e.jsxs("div",{className:"min-h-screen w-full relative",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:se,alt:"background",className:"w-full h-full object-cover opacity-60"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-gray-900/40 to-black opacity-80"})]}),e.jsx("div",{className:"relative min-h-screen flex flex-col justify-between items-center px-6 py-16",children:e.jsx("div",{className:"rounded-[70px] w-full h-full p-6 border border-2 mb-4 border-gray-700/30 backdrop-blur-sm bg-black/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex flex-col items-center justify-center items-center",children:[e.jsx("span",{className:"font-italiana flex flex-col items-center justify-center text-center text-white/90 text-[20px]",children:e.jsx("h2",{className:"font-italiana text-5xl md:text-[160px] text-white tracking-wide",children:"Testimonials"})}),n?e.jsxs("button",{onClick:T,className:"button flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]}):e.jsxs("button",{onClick:O,className:"button flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"Login with Google"})]})]}),e.jsx("p",{className:"mb-12 text-[16px] text-gray-300 leading-relaxed mt-3 text-center",children:"Comments from our customers"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-900/40 p-6 rounded-lg shadow-lg backdrop-blur-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:n?c?"Edit Your Testimonial":"Share Your Experience":"Please login to share your experience"}),j&&e.jsx("div",{className:"bg-green-900/50 text-green-300 p-3 mb-4 rounded-lg border border-green-500/20",children:j}),N&&e.jsx("div",{className:"bg-red-900/50 text-red-300 p-3 mb-4 rounded-lg border border-red-500/20",children:N}),n&&e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:s.Name,onChange:t=>r({...s,Name:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:s.Email,onChange:t=>r({...s,Email:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white",required:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"We'll use your email to generate your profile picture"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Occupation"}),e.jsx("select",{value:s.Occupation,onChange:t=>r({...s,Occupation:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white",required:!0,children:I.map((t,a)=>e.jsx("option",{value:t,children:t},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Post"}),e.jsx("input",{type:"text",value:s.Post,onChange:t=>r({...s,Post:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Institution"}),e.jsx("input",{type:"text",value:s.Institution,onChange:t=>r({...s,Institution:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Comment"}),e.jsx("textarea",{rows:"3",value:s.Comment,onChange:t=>r({...s,Comment:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white",required:!0})]}),e.jsx("button",{type:"submit",disabled:f,className:"button w-full flex flex-row items-center justify-center text-center gap-3 font-bold",children:f?e.jsx("span",{children:"Submitting..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:c?"Update Testimonial":"Share Your Story"}),e.jsx(Q,{className:"h-4 w-4"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Recent Testimonials"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map(t=>e.jsxs("div",{className:"bg-gray-800/60 rounded-lg p-4 shadow-lg h-full flex flex-col backdrop-blur-sm relative",children:[(k||(n==null?void 0:n.uid)===t.userId)&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("button",{onClick:()=>L(t),className:"p-1 rounded-full bg-gray-700 hover:bg-gray-600",title:"Edit",children:e.jsx(Z,{className:"h-3 w-3 text-white"})}),e.jsx("button",{onClick:()=>M(t.id),className:"p-1 rounded-full bg-gray-700 hover:bg-gray-600",title:"Delete",children:e.jsx(te,{className:"h-3 w-3 text-white"})})]}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsxs("div",{className:"h-10 w-10 rounded-full bg-purple-600 p-0.5 flex-shrink-0",children:[t.profilePictureUrl||t.email?e.jsx("img",{src:t.profilePictureUrl||v(t.email),alt:`${t.name}'s profile`,className:"h-full w-full rounded-full object-cover",onError:a=>{a.target.style.display="none",a.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:"h-full w-full rounded-full bg-gray-900 flex items-center justify-center",style:{display:t.profilePictureUrl||t.email?"none":"flex"},children:e.jsx(W,{className:"h-5 w-5 text-white"})})]}),e.jsxs("div",{className:"ml-3 overflow-hidden",children:[e.jsx("h3",{className:"text-base font-semibold text-white truncate",children:t.name}),t.Occupation&&e.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:t.Occupation})]})]})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:t.Comment}),t.post&&e.jsxs("p",{className:"text-xs text-purple-300 mt-2",children:["Post: ",t.post]}),t.institution&&e.jsxs("p",{className:"text-xs text-purple-300",children:["Institution: ",t.institution]}),e.jsx("span",{className:"mt-3 text-xs text-gray-400 font-medium",children:t.dateAndTime})]},t.id))})]})]})]})})})]})};export{le as default};
